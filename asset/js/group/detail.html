<div ng-if="!notFound" ng-show="detail">
    <h1>{{detail.name}}</h1>
    <div>
        {{ detail.description }}
    </div>
    <alert-message></alert-message>
    <div>
        <a ng-if="detail.role.newPost" href="/group/{{id}}/new-post" class="btn btn-primary btn-block">Tạo bài post mới</a>
        <a ng-if="!detail.role.joinGroup" href="/group/{{id}}/new-post" class="btn btn-primary btn-block">Tham gia nhóm</a>
        <div class="text-right">
            <button ng-if="detail.role.addMember" type="button" class="btn btn-link" data-toggle="modal" data-target="#addMember">
                <i class="fa fa-user-plus"></i> Add member
            </button>
            <a href="/group/{{id}}/edit" class="btn btn-link" ng-if="detail.role.editGroup"><span class="glyphicon glyphicon-edit"></span> Edit</a>
            <button ng-if="detail.role.deleteGroup" type="button" class="btn btn-link" style="color: red;"><span class="glyphicon glyphicon-remove"></span> Delete</button>
        </div>
    </div>
    <div class="panel panel-default" ng-repeat="post in listPost">
        <div class="panel-heading">{{ post.title }}</div>
        <div class="panel-body">
            <h1>{{ post.title }}</h1>
            <div ng-bind-html="post.content" ng-if="post.more"></div>
            <button ng-if="!post.more" ng-click="post.more = true" class="btn btn-link btn-block"><i class="material-icons">more_horiz</i></button>
        </div>
        <div class="panel-footer">
            <button ng-click="post.liked = !post.liked; post.unliked = false" class="btn btn-default">
                <i ng-class="{'fa-thumbs-up':post.liked, 'fa-thumbs-o-up':!post.liked}" class="fa" style="font-size:26px; color: rgb(10, 115, 236);"></i>
            </button>
            <button ng-click="post.liked = false; post.unliked = !post.unliked" class="btn btn-default">
                <i ng-class="{'fa-thumbs-down':post.unliked, 'fa-thumbs-o-down':!post.unliked}" class="fa" style="font-size:26px; color: rgb(10, 115, 236);"></i>
            </button>
            <button ng-click="post.commentBox = true;" class="btn btn-default"><i class="fa fa-commenting-o" style="font-size:26px; color: black;"></i></button>
        </div>
        <div ng-if="post.commentBox" class="panel-body">
            <h3>Comment</h3>
            <div class="form-group">
                <textarea class="form-control" rows="3" style="resize: none;"></textarea>
            </div>
            <div class="text-right">
                <button class="btn btn-info text-right">Gửi</button>
            </div>
        </div>
    </div>
    <h1 class="text-center" ng-if="loadingPost"><i class="fa fa-spinner fa-spin"></i></h1>
    <button ng-click="getPost()" class="btn btn-link btn-block">load more</button>
    
    <div ng-if="detail.role.addMember" id="addMember" class="modal fade" role="dialog">
        <div class="modal-dialog modal-sm">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Mời thành viên</h4>
                </div>
                <div class="modal-body">
                    <textarea style="width: 100%; resize: none" rows="4" placeholder="Viết gì đó" ng-model="invite.introduce"></textarea>
                    <input ng-change="searchUser()" type="text" placeholder="Tìm kiếm" style="width: 100%;" ng-model="invite.stringFindUserInvite">
                    <form>
                        <div class="list-user-invite-group">
                            <div class="checkbox" ng-repeat="user in invite.listFindUserInvite">
                                <label><input type="checkbox" ng-change="checkSendInvite()" ng-model="user.checked">{{user.email}}</label>
                            </div>
                        </div>
                        <button ng-if="invite.canSendInvite" style="margin-top: 10px;" ng-click="inviteUserJoinGroup()" data-dismiss="modal" class="btn btn-sm btn-info">Mời</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-if="notFound">
    <h1>This group not exists!</h1>
</div>